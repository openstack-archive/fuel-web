"""Changes before merge

Revision ID: 4f21f21e2672
Revises: 1a1504d469f8
Create Date: 2014-02-12 18:16:55.630914

"""

# revision identifiers, used by Alembic.
revision = '4f21f21e2672'
down_revision = '1a1504d469f8'

from nailgun.db.migration import utils


old_task_names_options = (
    'super',
    'deploy',
    'deployment',
    'provision',
    'node_deletion',
    'cluster_deletion',
    'check_before_deployment',
    'check_networks',
    'verify_networks',
    'check_dhcp',
    'verify_network_connectivity',
    'redhat_setup',
    'redhat_check_credentials',
    'redhat_check_licenses',
    'redhat_download_release',
    'redhat_update_cobbler_profile',
    'dump',
    'capacity_log',
    'stop_deployment',
    'reset_environment',
)
new_task_names_options = sorted(
    old_task_names_options + (
        'multicast_verification',
    )
)


def upgrade():
    ### commands auto generated by Alembic - please adjust! ###

    # TASK NAME ENUM UPGRADE
    utils.upgrade_enum(
        "tasks",                     # table
        "name",                      # column
        "task_name",                 # ENUM name
        old_task_names_options,      # old options
        new_task_names_options       # new options
    )

    ### end Alembic commands ###


def downgrade():
    ### commands auto generated by Alembic - please adjust! ###

    # TASK NAME ENUM DOWNGRADE
    utils.upgrade_enum(
        "tasks",                     # table
        "name",                      # column
        "task_name",                 # ENUM name
        new_task_names_options,      # old options
        old_task_names_options       # new options
    )

    ### end Alembic commands ###
