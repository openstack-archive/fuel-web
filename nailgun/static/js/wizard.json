{
  "NameAndRelease": {
    "name": {
      "type": "custom",
      "value": "",
      "bind": "cluster:name"
    },
    "release" : {
      "type": "custom",
      "bind": {"id": "cluster:release"},
      "aliases": {
        "operating_system": "NameAndRelease.release_operating_system",
        "roles": "NameAndRelease.release_roles",
        "name": "NameAndRelease.release_name"
      }
    }
  },
  "Mode": {
    "mode": {
      "type": "radio",
      "value": "ha_compact",
      "bind": "cluster:mode",
      "values": [
        {
          "data": "ha_compact",
          "label": "cluster.mode.ha_compact"
        },
        {
          "data": "multinode",
          "label": "cluster.mode.multinode"
        }
      ]
    }
  },
  "Compute": {
    "hypervisor": {
      "type": "radio",
      "value": "qemu",
      "bind": "settings:common.libvirt_type.value",
      "values": [
        {
          "data": "kvm",
          "label": "dialog.create_cluster_wizard.compute.kvm",
          "description": "dialog.create_cluster_wizard.compute.kvm_description"
        },
        {
          "data": "qemu",
          "label": "dialog.create_cluster_wizard.compute.qemu",
          "description": "dialog.create_cluster_wizard.compute.qemu_description"
        },
        {
          "data": "vcenter",
          "label": "dialog.create_cluster_wizard.compute.vcenter",
          "description": "dialog.create_cluster_wizard.compute.vcenter_description",
          "warnings": {
             "Mode.mode == 'ha_compact' and Compute.hypervisor == 'vcenter'": "dialog.create_cluster_wizard.compute.ha_vcenter_warning"
          }
        }
      ]
    },
    "host_ip": {
      "type": "text",
      "label": "vCenter IP",
      "description": "IP Address of vCenter",
      "bind": "settings:vcenter.host_ip.value",
      "restrictions": {
        "Compute.hypervisor != 'vcenter'": null
      },
      "regex": {
        "source": "^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$",
        "error": "dialog.create_cluster_wizard.compute.vcenter_ip_warning"
      }
    },
    "vc_user": {
      "type": "text",
      "label": "Username",
      "description": "vCenter admin username",
      "bind": "settings:vcenter.vc_user.value",
      "restrictions": {
        "Compute.hypervisor != 'vcenter'": null
      },
      "regex": {
        "source": "^.+$",
        "error": "dialog.create_cluster_wizard.compute.vcenter_username_warning"
      }
    },
    "vc_password": {
      "type": "password",
      "label": "Password",
      "description": "vCenter admin password",
      "bind": "settings:vcenter.vc_password.value",
      "restrictions": {
        "Compute.hypervisor != 'vcenter'": null
      },
      "regex": {
        "source": "^.+$",
        "error": "dialog.create_cluster_wizard.compute.vcenter_password_warning"
      }
    },
    "cluster": {
      "type": "text",
      "label": "Cluster",
      "name": "cluster",
      "description": "vCenter cluster name",
      "bind": "settings:vcenter.cluster.value",
      "restrictions": {
        "Compute.hypervisor != 'vcenter'": null
      },
      "regex": {
        "source": "^.+$",
        "error": "dialog.create_cluster_wizard.compute.vcenter_cluster_warning"
      }
    }
  },
  "Network": {
    "manager": {
      "type": "radio",
      "value": "nova-network",
      "values": [
        {
          "data": "nova-network",
          "label": "dialog.create_cluster_wizard.network.nova_network",
          "bind": [
            {"cluster:net_provider": "nova_network"}
          ]
        },
        {
          "data": "neutron-gre",
          "label": "dialog.create_cluster_wizard.network.neutr_gre",
          "restrictions": {
            "Compute.hypervisor == 'vcenter'": "dialog.create_cluster_wizard.network.hypervisor_alert"
          },
          "bind": [
            {"cluster:net_provider": "neutron"},
            {"cluster:net_segment_type": "gre"}
          ]
        },
        {
          "data": "neutron-vlan",
          "label": "dialog.create_cluster_wizard.network.neutr_vlan",
          "restrictions": {
            "Compute.hypervisor == 'vcenter'": "dialog.create_cluster_wizard.network.hypervisor_alert"
          },
          "bind": [
            {"cluster:net_provider": "neutron"},
            {"cluster:net_segment_type": "vlan"}
          ]
        }
      ]
    }
  },
  "Storage": {
    "cinder": {
      "type": "radio",
      "value": "default",
      "values": [
        {
          "data": "default",
          "label": "dialog.create_cluster_wizard.storage.default",
          "bind": [{"settings:storage.volumes_lvm.value": true}]
        },
        {
          "data": "ceph",
          "label": "dialog.create_cluster_wizard.storage.ceph",
          "restrictions": {
            "not ('ceph-osd' in NameAndRelease.release_roles)": "dialog.create_cluster_wizard.storage.alert",
            "Compute.hypervisor == 'vcenter'": "dialog.create_cluster_wizard.storage.vcenter_alert"
          },
          "bind": [
            {"settings:storage.volumes_ceph.value": true},
            {"settings:storage.volumes_lvm.value": false}
          ]
        }
      ]
    },
    "glance": {
      "type": "radio",
      "value": "default",
      "values": [
        {
          "data": "default",
          "label": "dialog.create_cluster_wizard.storage.default"
        },
        {
          "data": "ceph",
          "label": "dialog.create_cluster_wizard.storage.ceph",
          "restrictions": {
             "not ('ceph-osd' in NameAndRelease.release_roles)": "dialog.create_cluster_wizard.storage.alert",
             "Compute.hypervisor == 'vcenter'": "dialog.create_cluster_wizard.storage.vcenter_alert"
          },
          "bind": [{"settings:storage.images_ceph.value": true}]
        }
      ]
    }
  },
  "AdditionalServices": {
    "sahara": {
      "type": "checkbox",
      "value": false,
      "label": "dialog.create_cluster_wizard.additional.install_sahara",
      "description": "dialog.create_cluster_wizard.additional.install_sahara_description",
      "bind": "settings:additional_components.sahara.value",
      "weight": 10
    },
    "murano": {
      "type": "checkbox",
      "value": false,
      "label": "dialog.create_cluster_wizard.additional.install_murano",
      "description": "dialog.create_cluster_wizard.additional.install_murano_description",
      "bind": "settings:additional_components.murano.value",
      "weight": 20,
      "restrictions": {
        "Network.manager == 'nova-network'": "dialog.create_cluster_wizard.additional.network_mode_alert"
      }
    },
    "ceilometer": {
      "type": "checkbox",
      "value": false,
      "label": "dialog.create_cluster_wizard.additional.install_ceilometer",
      "description": "dialog.create_cluster_wizard.additional.install_ceilometer_description",
      "bind": "settings:additional_components.ceilometer.value",
      "weight": 30
    }
  },
  "Ready": {}
}